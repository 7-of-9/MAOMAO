{"component":"module.exports=webpackJsonp([4],{1026:function(e,t,n){\"use strict\";function r(e){return(0,a.fromPromise)(u.default.get(l.MAOMAO_API_URL+\"share/info?share_code=\"+e))}function i(e,t,n){var r=l.MAOMAO_API_URL+\"share/accept?user_id=\"+e+\"&hash=\"+t+\"&share_code=\"+n;return(0,a.fromPromise)(u.default.get(r))}Object.defineProperty(t,\"__esModule\",{value:!0}),t.getShareInfo=r,t.acceptInvite=i;var a=n(245),o=n(179),u=function(e){return e&&e.__esModule?e:{default:e}}(o),l=n(89)},1030:function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r){n&&(0,p.default)(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function a(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,(\"value\"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return R.warn(\"init InviteStore\"),e&&\"undefined\"==typeof window?new A(e,t,n,r):(null===j&&(j=new A(e,t,n,r)),j)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.initStore=o;var u,l,s,c,f,d=n(72),p=r(d),v=n(132),h=r(v),b=n(19),I=r(b),_=n(12),y=r(_),m=n(13),g=r(m),C=n(21),w=r(C),P=n(20),M=r(P),O=n(23),z=n(34),R=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(z),k=n(493),S=n(1026),E=n(171),j=null,A=(u=function(e){function t(e,n,r,a){(0,y.default)(this,t);var o=(0,w.default)(this,(t.__proto__||(0,I.default)(t)).call(this,e,n));return i(o,\"shareCode\",l,o),i(o,\"acceptInviteResult\",s,o),i(o,\"inviteResult\",c,o),i(o,\"shareInfo\",f,o),o.shareCode=r,o.shareInfo=a,(0,O.reaction)(function(){return o.userHash.length},function(e){e>0&&(R.warn(\"yeah... acceptInviteCode\"),o.acceptInviteCode())}),o}return(0,M.default)(t,e),(0,g.default)(t,[{key:\"checkInstall\",value:function(){R.warn(\"hasInstalledExtension\",(0,E.hasInstalledExtension)()),this.isChrome&&!this.isMobile&&(this.isInstall=(0,E.hasInstalledExtension)())}},{key:\"acceptInviteCode\",value:function(){var e=this;R.warn(\"acceptInviteCode\",this.shareCode),this.acceptInviteResult=(0,S.acceptInvite)(this.userId,this.userHash,this.shareCode),(0,O.when)(function(){return\"pending\"!==e.acceptInviteResult.state},function(){e.inviteResult=e.acceptInviteResult.value,e.getUserHistory(),R.warn(\"inviteResult\",e.inviteResult)})}}]),t}(k.HomeStore),l=a(u.prototype,\"shareCode\",[O.observable],{enumerable:!0,initializer:function(){return\"\"}}),s=a(u.prototype,\"acceptInviteResult\",[O.observable],{enumerable:!0,initializer:function(){return{}}}),c=a(u.prototype,\"inviteResult\",[O.observable],{enumerable:!0,initializer:function(){return{}}}),f=a(u.prototype,\"shareInfo\",[O.observable],{enumerable:!0,initializer:function(){return{}}}),a(u.prototype,\"checkInstall\",[O.action],(0,h.default)(u.prototype,\"checkInstall\"),u.prototype),a(u.prototype,\"acceptInviteCode\",[O.action],(0,h.default)(u.prototype,\"acceptInviteCode\"),u.prototype),u)},1229:function(e,t,n){e.exports=n(554)},554:function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var i=n(19),a=r(i),o=n(110),u=r(o),l=n(12),s=r(l),c=n(21),f=r(c),d=n(13),p=r(d),v=n(20),h=r(v),b=n(2),I=r(b),_=n(87),y=n(1030),m=n(492),g=r(m),C=n(249),w=r(C),P=n(34),M=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(P),O=function(e){function t(e){(0,s.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));M.warn(\"Invite\",e);var r=e.url.query,i=r.close,o=r.success;return i&&\"popup\"===i||o&&1===Number(o)?n.isClosePopup=!0:n.isClosePopup=!1,n.store=(0,y.initStore)(e.isServer,e.userAgent,e.shareCode,e.shareInfo),n}return(0,h.default)(t,e),(0,p.default)(t,null,[{key:\"getInitialProps\",value:function(e){var t=e.req,n=e.query,r=n.code,i=n.shareInfo,a=!!t,o=\"\";t&&t.headers&&t.headers[\"user-agent\"]&&(o=t.headers[\"user-agent\"]);var l=(0,y.initStore)(a,o,r,i);return(0,u.default)({isServer:a},l)}}]),(0,p.default)(t,[{key:\"render\",value:function(){return I.default.createElement(_.Provider,{store:this.store},I.default.createElement(\"div\",null,I.default.createElement(\"style\",{dangerouslySetInnerHTML:{__html:w.default}}),I.default.createElement(g.default,{isClosePopup:this.isClosePopup})))}}]),t}(I.default.Component);t.default=O}},[1229]);"}